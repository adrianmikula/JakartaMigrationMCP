# Gradle Configuration
# Optimized for fast builds with caching

# JVM Arguments
org.gradle.jvmargs=-Xmx2048m -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError

# =============================================================================
# Build Cache Configuration
# =============================================================================

# Enable Gradle Build Cache (reuses outputs from previous builds)
org.gradle.caching=true

# Enable parallel execution
org.gradle.parallel=true

# Enable configuration cache (caches build configuration for faster subsequent builds)
# NOTE: Configuration cache is NOT compatible with tasks that access allprojects
# Validation tasks (validateLicenseHeaders, validateDependencyLicenses, validateModuleBoundaries)
# must be run with --no-configuration-cache flag
org.gradle.configuration-cache=true

# Configure cache directory
org.gradle.gradleuserhome=${USERPROFILE}/.gradle

# =============================================================================
# Performance Optimizations
# =============================================================================

# Enable incremental compilation
org.gradle.java.incremental=true

# Enable annotation processing incremental compilation
org.gradle.java.compile.incremental=true

# Configure worker processes
org.gradle.workers.max=4

# Enable build cache for test tasks
org.gradle.caching.testTasks=true

# =============================================================================
# Daemon Settings
# =============================================================================

# Enable Gradle Daemon (reduces JVM startup time)
org.gradle.daemon=true

# Daemon JVM args
org.gradle.daemon.jvmargs=-Xmx2048m -XX:MaxMetaspaceSize=512m

# =============================================================================
# Java Home
# =============================================================================

# Use mise-managed Java installation
org.gradle.java.home=/usr/lib/jvm/java-1.21.0-openjdk-amd64

# =============================================================================
# Feature Flags
# =============================================================================

# Enable preview features (if needed)
# org.gradle.java.installations.auto-download=true

# =============================================================================
# Plugin Version for IntelliJ Marketplace
# =============================================================================

version=1.0.0

# =============================================================================
# Configuration Cache Compatibility
# =============================================================================

# These settings ensure configuration cache compatibility:
# - Tasks are declared with proper types
# - No configuration during execution phase
# - No random or order-dependent configurations

# Warn if configuration cache has issues
org.gradle.configuration-cache.problems=warn

# =============================================================================
# Build Cache Configuration
# =============================================================================

# Remote build cache (disabled by default, enable for CI)
# org.gradle.build-cache.remote=true
# org.gradle.build-cache.remote.url=https://cache.example.com

# Local build cache settings
org.gradle.build-cache.local=true
org.gradle.build-cache.local.directory=${USERPROFILE}/.gradle/build-cache
