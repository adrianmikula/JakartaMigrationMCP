<idea-plugin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://plugins.jetbrains.com/schemas/plugin/2/plugin.xsd" icon="/icons/pluginIcon.svg">
    <id>com.adrianmikula.jakarta-migration</id>
    <name>Jakarta Migration (javax ‚Üí jakarta)</name>
    <vendor email="adrian.m@tuta.io" name="Adrian Mikula" url="https://github.com/adrianmikula/JakartaMigrationMCP">Adrian Mikula</vendor>
    <category>Framework Integration</category>

    <description><![CDATA[
    <h2>Automate Your Java EE to Jakarta EE Migration</h2>

    <p>Migrate from Java EE 8 (javax.*) to Jakarta EE 9+ seamlessly. This plugin analyzes dependencies, detects migration blockers, and automates refactoring with OpenRewrite.</p>

    <h3>Why Jakarta EE?</h3>
    <p>After Oracle donated Java EE to the Eclipse Foundation, the javax.* namespace became jakarta.*. If you're on Java 11+ with Spring Boot 3+ or Jakarta EE, you need this migration.</p>

    <h3>Key Features</h3>
    <ul>
    <li>üîç <b>Migration Analysis</b> - Detect blockers before you start</li>
    <li>üì¶ <b>Dependency Recommendations</b> - Find Jakarta-compatible versions</li>
    <li>ü§ñ <b>AI-Powered</b> - MCP server for Claude, Cursor, and AI Assistants</li>
    <li>üìä <b>Dependency Graphs</b> - Visualize your module dependencies</li>
    <li>‚ö° <b>Auto-Refactoring</b> - OpenRewrite-powered fixes</li>
    </ul>

    <h3>Supported Technologies</h3>
    <p>Spring Boot 3+, Jakarta EE 9+, Java 11+, Maven, Gradle</p>

    <h3>Free vs Premium</h3>
    <ul>
    <li><b>Free:</b> Analysis, blockers detection, version recommendations</li>
    <li><b>Premium:</b> Auto-fixes, one-click refactoring, binary fixes</li>
    </ul>
    ]]></description>

    <!-- IntelliJ Platform Version Requirements -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>

    <!-- Optional AI Assistant dependency (enables MCP integration) -->
    <depends optional="true" config-file="ai-assistant.xml">com.intellij.modules.ai</depends>

    <!-- Extensions for MCP Integration -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Project Activity for MCP Server Auto-Registration -->
        <!-- Automatically loads MCP server when plugin is enabled -->
        <projectActivity implementation="adrianmikula.jakartamigration.intellij.JakartaMcpRegistrationActivity"/>

        <!-- Tool Window -->
        <toolWindow id="JakartaMigration"
                    displayName="Jakarta Migration"
                    anchor="right"
                    icon="/icons/pluginIcon.svg"
                    factoryClass="adrianmikula.jakartamigration.intellij.ui.MigrationToolWindow"/>

        <!-- Application Service for MCP Client -->
        <service serviceImplementation="adrianmikula.jakartamigration.intellij.mcp.DefaultMcpClientService"
                 serviceInterface="adrianmikula.jakartamigration.intellij.mcp.McpClientService"/>

        <!-- Notification for MCP Server Status -->
        <notificationGroup id="JakartaMigration.McpStatus"
                          displayType="BALLOON"
                          key="mcp.status.notification"/>
    </extensions>

    <!-- AI Assistant Extensions (loaded when AI Assistant is available) -->
    <extensions defaultExtensionNs="com.intellij.ai">
        <!-- MCP Server Provider for AI Assistant tool discovery -->
        <mcpServerProvider id="jakarta-migration-mcp"
                          implementation="adrianmikula.jakartamigration.intellij.mcp.JakartaMcpServerProvider"/>
    </extensions>

    <actions>
        <!-- Main Migration Action -->
        <action id="JakartaMigrationAction"
                class="adrianmikula.jakartamigration.intellij.JakartaMigrationAction"
                text="Jakarta Migration"
                description="Analyze and migrate to Jakarta EE"
                icon="icons/pluginIcon.svg">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift J"/>
        </action>

        <!-- AI Assistant Actions -->
        <action id="JakartaMigration.AnalyzeProject"
                class="adrianmikula.jakartamigration.intellij.JakartaMigrationAction"
                text="Analyze with AI Assistant"
                description="Analyze project with Jakarta Migration AI Assistant"
                icon="icons/pluginIcon.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>
    </actions>

    <change-notes><![CDATA[
    <h>1.0.0</h>
    <ul>
        <li>Initial release to IntelliJ Marketplace</li>
        <li>Migration readiness analysis for Jakarta EE</li>
        <li>Dependency analysis and version recommendations</li>
        <li>Module dependency graph visualization</li>
        <li>Phased migration planning</li>
        <li>MCP server integration for AI Assistant</li>
        <li>OpenRewrite refactoring support</li>
    </ul>
    ]]></change-notes>

</idea-plugin>
